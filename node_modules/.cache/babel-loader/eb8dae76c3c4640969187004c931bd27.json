{"ast":null,"code":"import { takeEvery, fork, put, all, call } from 'redux-saga/effects';\n\n// Login Redux States\nimport { CHECK_LOGIN, LOGOUT_USER } from './actionTypes';\nimport { apiError, loginUserSuccessful, logoutUserSuccess } from './actions';\n\n// AUTH related methods\nimport { postLogin } from '../../../helpers/fackBackend_Helper';\nimport { getFirebaseBackend } from '../../../helpers/firebase_helper';\n\n//Initilize firebase\nconst fireBaseBackend = getFirebaseBackend();\n\n//If user is login then dispatch redux action's are directly from here.\nfunction loginUser(_ref) {\n  let {\n    payload: {\n      user,\n      history\n    }\n  } = _ref;\n  return function* () {\n    try {\n      if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\n        const response = yield call(fireBaseBackend.loginUser, user.username, user.password);\n        yield put(loginUserSuccessful(response));\n      } else {\n        const response = yield call(postLogin, '/post-login', {\n          username: user.username,\n          password: user.password\n        });\n        localStorage.setItem(\"authUser\", JSON.stringify(response));\n        yield put(loginUserSuccessful(response));\n      }\n      history.push('/dashboard');\n    } catch (error) {\n      yield put(apiError(error));\n    }\n  }();\n}\nfunction logoutUser(_ref2) {\n  let {\n    payload: {\n      history\n    }\n  } = _ref2;\n  return function* () {\n    try {\n      localStorage.removeItem(\"authUser\");\n      if (process.env.REACT_APP_DEFAULTAUTH === 'firebase') {\n        const response = yield call(fireBaseBackend.logout);\n        yield put(logoutUserSuccess(response));\n      }\n      history.push('/login');\n    } catch (error) {\n      yield put(apiError(error));\n    }\n  }();\n}\nexport function* watchUserLogin() {\n  yield takeEvery(CHECK_LOGIN, loginUser);\n}\nexport function* watchUserLogout() {\n  yield takeEvery(LOGOUT_USER, logoutUser);\n}\nfunction* loginSaga() {\n  yield all([fork(watchUserLogin), fork(watchUserLogout)]);\n}\nexport default loginSaga;","map":{"version":3,"names":["takeEvery","fork","put","all","call","CHECK_LOGIN","LOGOUT_USER","apiError","loginUserSuccessful","logoutUserSuccess","postLogin","getFirebaseBackend","fireBaseBackend","loginUser","_ref","payload","user","history","process","env","REACT_APP_DEFAULTAUTH","response","username","password","localStorage","setItem","JSON","stringify","push","error","logoutUser","_ref2","removeItem","logout","watchUserLogin","watchUserLogout","loginSaga"],"sources":["D:/excercise-t/src/store/auth/login/saga.js"],"sourcesContent":["import { takeEvery, fork, put, all, call } from 'redux-saga/effects';\r\n\r\n// Login Redux States\r\nimport { CHECK_LOGIN, LOGOUT_USER } from './actionTypes';\r\nimport { apiError, loginUserSuccessful, logoutUserSuccess } from './actions';\r\n\r\n// AUTH related methods\r\nimport { postLogin } from '../../../helpers/fackBackend_Helper';\r\nimport { getFirebaseBackend } from '../../../helpers/firebase_helper';\r\n\r\n//Initilize firebase\r\nconst fireBaseBackend = getFirebaseBackend();\r\n\r\n//If user is login then dispatch redux action's are directly from here.\r\nfunction* loginUser({ payload: { user, history } }) {\r\n        try {\r\n            if(process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\r\n                const response = yield call(fireBaseBackend.loginUser, user.username, user.password);\r\n                yield put(loginUserSuccessful(response));\r\n            }\r\n            else {\r\n                const response = yield call(postLogin, '/post-login', {username: user.username, password: user.password});\r\n                localStorage.setItem(\"authUser\", JSON.stringify(response));\r\n                yield put(loginUserSuccessful(response));\r\n            }\r\n            history.push('/dashboard');\r\n        } catch (error) {\r\n            yield put(apiError(error));\r\n        }\r\n}\r\n\r\nfunction* logoutUser({ payload: { history } }) {\r\n    try {\r\n        localStorage.removeItem(\"authUser\");\r\n\r\n        if (process.env.REACT_APP_DEFAULTAUTH === 'firebase') {\r\n            const response = yield call(fireBaseBackend.logout);\r\n            yield put(logoutUserSuccess(response));\r\n        }\r\n\r\n        history.push('/login');\r\n    } catch (error) {\r\n        yield put(apiError(error));\r\n    }\r\n}\r\n\r\nexport function* watchUserLogin() {\r\n    yield takeEvery(CHECK_LOGIN, loginUser)\r\n}\r\n\r\nexport function* watchUserLogout() {\r\n    yield takeEvery(LOGOUT_USER, logoutUser)\r\n}\r\n\r\nfunction* loginSaga() {\r\n    yield all([\r\n        fork(watchUserLogin),\r\n        fork(watchUserLogout),\r\n    ]);\r\n}\r\n\r\nexport default loginSaga;"],"mappings":"AAAA,SAASA,SAAS,EAAEC,IAAI,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,QAAQ,oBAAoB;;AAEpE;AACA,SAASC,WAAW,EAAEC,WAAW,QAAQ,eAAe;AACxD,SAASC,QAAQ,EAAEC,mBAAmB,EAAEC,iBAAiB,QAAQ,WAAW;;AAE5E;AACA,SAASC,SAAS,QAAQ,qCAAqC;AAC/D,SAASC,kBAAkB,QAAQ,kCAAkC;;AAErE;AACA,MAAMC,eAAe,GAAGD,kBAAkB,CAAC,CAAC;;AAE5C;AACA,SAAUE,SAASA,CAAAC,IAAA;EAAA,IAAC;IAAEC,OAAO,EAAE;MAAEC,IAAI;MAAEC;IAAQ;EAAE,CAAC,GAAAH,IAAA;EAAA,oBAAE;IAC5C,IAAI;MACA,IAAGI,OAAO,CAACC,GAAG,CAACC,qBAAqB,KAAK,UAAU,EAAE;QACjD,MAAMC,QAAQ,GAAG,MAAMjB,IAAI,CAACQ,eAAe,CAACC,SAAS,EAAEG,IAAI,CAACM,QAAQ,EAAEN,IAAI,CAACO,QAAQ,CAAC;QACpF,MAAMrB,GAAG,CAACM,mBAAmB,CAACa,QAAQ,CAAC,CAAC;MAC5C,CAAC,MACI;QACD,MAAMA,QAAQ,GAAG,MAAMjB,IAAI,CAACM,SAAS,EAAE,aAAa,EAAE;UAACY,QAAQ,EAAEN,IAAI,CAACM,QAAQ;UAAEC,QAAQ,EAAEP,IAAI,CAACO;QAAQ,CAAC,CAAC;QACzGC,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEC,IAAI,CAACC,SAAS,CAACN,QAAQ,CAAC,CAAC;QAC1D,MAAMnB,GAAG,CAACM,mBAAmB,CAACa,QAAQ,CAAC,CAAC;MAC5C;MACAJ,OAAO,CAACW,IAAI,CAAC,YAAY,CAAC;IAC9B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZ,MAAM3B,GAAG,CAACK,QAAQ,CAACsB,KAAK,CAAC,CAAC;IAC9B;EACR,CAAC;AAAA;AAED,SAAUC,UAAUA,CAAAC,KAAA;EAAA,IAAC;IAAEhB,OAAO,EAAE;MAAEE;IAAQ;EAAE,CAAC,GAAAc,KAAA;EAAA,oBAAE;IAC3C,IAAI;MACAP,YAAY,CAACQ,UAAU,CAAC,UAAU,CAAC;MAEnC,IAAId,OAAO,CAACC,GAAG,CAACC,qBAAqB,KAAK,UAAU,EAAE;QAClD,MAAMC,QAAQ,GAAG,MAAMjB,IAAI,CAACQ,eAAe,CAACqB,MAAM,CAAC;QACnD,MAAM/B,GAAG,CAACO,iBAAiB,CAACY,QAAQ,CAAC,CAAC;MAC1C;MAEAJ,OAAO,CAACW,IAAI,CAAC,QAAQ,CAAC;IAC1B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZ,MAAM3B,GAAG,CAACK,QAAQ,CAACsB,KAAK,CAAC,CAAC;IAC9B;EACJ,CAAC;AAAA;AAED,OAAO,UAAUK,cAAcA,CAAA,EAAG;EAC9B,MAAMlC,SAAS,CAACK,WAAW,EAAEQ,SAAS,CAAC;AAC3C;AAEA,OAAO,UAAUsB,eAAeA,CAAA,EAAG;EAC/B,MAAMnC,SAAS,CAACM,WAAW,EAAEwB,UAAU,CAAC;AAC5C;AAEA,UAAUM,SAASA,CAAA,EAAG;EAClB,MAAMjC,GAAG,CAAC,CACNF,IAAI,CAACiC,cAAc,CAAC,EACpBjC,IAAI,CAACkC,eAAe,CAAC,CACxB,CAAC;AACN;AAEA,eAAeC,SAAS"},"metadata":{},"sourceType":"module"}